<taskModel about="urn:disco.wpi.edu:htnlfd:TireRotationPrimitives" xmlns="http://www.cs.wpi.edu/~rich/cetask/cea-2018-ext">
	<!-- For seeing the graphical model please refer to heres-how/docs/TireRotation.pdf -->	
	<!-- Primitive tasks -->	
	<task id="Unscrew">
		<input name="stud" type="Stud"/>
		<output name="nut" type="Nut"/>
		<binding slot="$this.external" value="false"/>
		<precondition> $this.stud == undefined ? undefined : $this.stud.getNut() != null </precondition>
		
		<script>
			if  ( isROS() ) {
			    ;
                  	} else{
				world.LOOSE_NUTS.add($this.stud.getNut()); 
				$this.nut = $this.stud.getNut(); 
				$this.stud.setNut(null);
			}
		</script>
    	</task>	

	<task id="Screw">
        <input name="nut" type="Nut" modified="newNut"/>
		<input name="stud" type="Stud"/>
		<output name="newNut" type="Nut"/>	
		<binding slot="$this.external" value="false"/>
		<precondition> 
			$this.stud.getNut() == null  &amp;&amp; !world.LOOSE_NUTS.isEmpty()
		</precondition>
		<script>  
			if  ( isROS() ) {
				;
		  	} else{
				world.LOOSE_NUTS.remove($this.nut); 
				$this.nut = $this.stud.getNut(); 
				$this.stud.setNut($this.nut); 	
			}	
		</script>
	</task>
	
	<task id="Unmount"> 
		<input name="wheel" type="Wheel"/>
		<output name="tire" type="Tire"/>
		<precondition> ($this.tire == undefined || $this.wheel == undefined )? undefined : true </precondition>
		<postcondition> $this.wheel.getTire() == null &amp;&amp; $this.tire == $this.wheel.getTire() </postcondition>
		<script>
			if  ( isROS() ) {
				;
		  	} else{
				$this.tire = $this.wheel.getTire();
				$this.wheel.setTire(null);
			}
		</script>
	</task>	
	
	<task id="Mount">
		<input name="tire" type="Tire" modified="newTire"/>
		<input name="wheel" type="Wheel"/>
		<output name="newTire" type="Tire"/>
		<binding slot="$this.external" value="false"/>
		<precondition> ($this.tire == undefined || $this.wheel == undefined )? undefined : true </precondition>	
		<postcondition> $this.wheel.getTire() == $this.newTire </postcondition>
		<script>
			if  ( isROS() ) {
				;
		  	} else{
				$this.newTire.location = new Location($this.wheel.location);
				$this.wheel.setTire($this.newTire);
			}
		</script>
	</task>	
	
	<task id="PickUp">
		<input name="object" type="PhysObj" modified="newObject"/>
		<output name="newObject" type="PhysObj"/>
		<binding slot="$this.external" value="false"/>
		<precondition> $this.object == undefined ? undefined : true </precondition>		
		<script>
			if  ( isROS() ) {
				;
		  	} else{
				$this.newObject.location = Location.plus($this.object.location,new Location(0,0,10));
			}
		</script>
	</task>	
	<task id="PutDown">
		<input name="object" type="PhysObj" modified="newObject"/>
		<output name="newObject" type="PhysObj"/>
		<binding slot="$this.external" value="false"/>
		<precondition> $this.object == undefined ? undefined : true </precondition>	
		<script>
			if  ( isROS() ) {
				;
		  	} else{
				$this.newObject.location = Location.plus($this.object.location,new Location(0,0,-10));
			}
		</script>
	</task>
	<script init="true">
		function isROS(){
			return false;
		}
	</script>
	
</taskModel>
